<div class="d-flex h-100">
    <!-- Groups Panel -->
    <div class="d-flex flex-column border-end p-3" style="width: 320px; min-width: 320px; flex-shrink: 0;">
        <!-- Groups Header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="mb-0 fw-bold">
                <i class="bi bi-folder2-open"></i> Groups
                <span class="badge bg-secondary ms-1">@filtredGroups.Count()</span>
            </h6>
        </div>

        <!-- Sort By Dropdown -->
        <div class="mb-2">
            <select class="form-select form-select-sm" @bind="sortOption" @bind:after="ApplySorting">
                <option value="count">Sort by: Channel Count</option>
                <option value="name">Sort by: Name (A-Z)</option>
                <option value="original">Sort by: Original Order</option>
            </select>
        </div>

        <!-- Search Box -->
        <div class="mb-2">
            <div class="input-group input-group-sm">
                <span class="input-group-text bg-white">
                    <i class="bi bi-search"></i>
                </span>
                <input class="form-control" placeholder="Search groups..." @oninput="FilterGroups" />
            </div>
        </div>

        <!-- Groups List -->
        <div class="flex-grow-1 overflow-auto">
            <select class="form-select form-select-sm" style="height: 100%; border: none;" @oninput="OnSelectGroupsInput" multiple>
                @foreach (var group in filtredGroups)
                {
                    if (!string.IsNullOrEmpty(group.Value.TrimedName))
                    {
                        <option class="@(IsInBoothLists(group.Value.TrimedName) ? "bg-success text-white" : "")" 
                                value="@group.Value.TrimedName" 
                                title="@group.Value.Name">
                            <span class="badge bg-primary me-1">@group.Value.Channels.Count()</span>
                            @GetDisplayGroupName(group.Value.Name)
                        </option>
                    }
                }
            </select>
        </div>
    </div>

    <!-- Channels Panel -->
    <div class="flex-grow-1 d-flex flex-column p-3">
        <ChannelsList @ref="channelsList" M3UListModelId="M3UListModelId"></ChannelsList>
    </div>
</div>